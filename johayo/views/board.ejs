<% layout('layout') -%>
<div class="board" >
	<h4><div class="upper"><%=title%> 목록</div><div class="oc" ng-click="openColse();" ng-init="oc='열기'">{{oc}}</div></h4>
	<div ng-class='display'>
		<table summary="<%=title%> 목록">
			<caption><%=title%> 목록</caption>
			<colgroup>
				<col width="87%"/>
				<col width="13%"/>
			</colgroup>
			<tbody id="boardList">
				<%if(boardList.length > 0){%>
					<% for(var i=0;i<boardList.length;i++){ %>
						<tr>
							<td scope="row"><%=boardList[i].title%></td>
							<td scope="row"><%=boardList[i].date.substring(0,4)+"/"+boardList[i].date.substring(4,6)+"/"+boardList[i].date.substring(6,8)%></td>
						</tr>
					<%}%>
				<%}else{%>
					<tr>
						<td style="text-align: center;" colspan="2">등록된 게시물이 없습니다.<td>
					</tr>
				<%}%>
			</tbody>
		</table>
		<div class="paging" id="topPaging"><%-topPaging%></div>
	</div>
</div>

<% for(var i=0;i<boardList.length;i++){ %>
	<br>
	<div class='boardDetail'>
		<table summary="<%=boardList[i].title%>" style="margin-top:10px; margin-bottom:10px;">
			<caption><%=boardList[i].title%></caption>
			<colgroup>
				<col width="70%"/>
				<col width="30%"/>
			</colgroup>
			<thead>
				<tr class='aa'>
					<td class="title">
						<%=boardList[i].title%>
					</td>
					<td class="date">
						<%=boardList[i].date.substring(0,4)+"/"+boardList[i].date.substring(4,6)+"/"+boardList[i].date.substring(6,8)+" "+boardList[i].date.substring(8,10)+":"+boardList[i].date.substring(10,12)%>
					</td>
				</tr>
			</thead>
			<tfoot id='tfoot<%=i%>'>
				<tr>
					<td colspan="2">
					<span style="font-family: 돋움; color: rgb(138,131,126); margin-left: 5px; cursor: pointer;" ng-click="commentOpenColse(<%=i%>);" ng-init="commentOc='comment'"><b>{{commentOc}}</b></td>
					<td>
				</tr>
				<tr id='commnetDisplay<%=i%>' class="hidden">
					<td colspan="2">
						<table summary="<%=boardList[i].title%> 댓글" style="border: 0px; width: 580px; table-layout: fixed; margin:0 auto;">
							<caption><%=boardList[i].title%> 댓글</caption>
							<tbody id="comment">
							<%if(boardList[i].comment.length > 0){%>
								<%
								for(var j=0;j<boardList[i].comment.length;j++){
									var date = String(boardList[i].comment[j].date)
								%>
									<tr>
										<td>
											<span style="font-size: 13px; font-weight: bold;"><%=boardList[i].comment[j].id%></span>
											<span style="font-size: 11px;">(<%=date.substring(0,4)+"/"+date.substring(4,6)+"/"+date.substring(6,8)+" "+date.substring(8,10)+":"+date.substring(10,12)%>)</span>
										</td>
									</tr>
									<tr>
										<td style="border-bottom: 1px dotted #000000;"><%=boardList[i].comment[j].content%></td>
									</tr>
								<%}%>							
							<%}%>
							</tbody>
						</table>
						<div style="text-align:right; margin-top: 5px;">
							<form>
								ㄴ<input type="text" size="65" id="content<%=i%>" placeholder='내용' required >
								<input type="text" size="10" id="id<%=i%>" placeholder='아이디' required >
								<input type="password" size="10" id="password<%=i%>" placeholder='비밀번호' required > 
								<input type="submit" value="등록" ng-click="insertComment('<%=i%>', '<%=boardList[i]._id%>');" /> 
							</form>
						</div>
					</td>
				</tr>
			</tfoot>
			<tbody>
				<tr>
					<td colspan="2">
						<div style="margin-top:5px;margin-bottom:2px;">
							<pre><%-boardList[i].content%></pre>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
<%}%>
<%if(boardList.length > 0){%>
	<div class="paging" id="paging"><%-paging%></div>
<%}%>